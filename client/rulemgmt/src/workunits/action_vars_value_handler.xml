<workunit>
    <invokers>
        <invoker type="actionvaluehandler:vars" />
    </invokers>
    <code>
        <![CDATA[    

        import com.rameses.rcp.annotations.*
        import com.rameses.rcp.common.*
        import com.rameses.osiris2.client.*
        import com.rameses.osiris2.common.*
        import com.rameses.common.*;
        
        class VarsValueHandler
        {        
            @Binding
            def binding;
            
            def vars;
            def actionParam;
            
            def getValueText() {
                return actionParam.value;
            }
            
            def edit() {
                def vlist = vars.findAll{ it.datatype == actionParam.datatype }
                return InvokerUtil.lookupOpener("var:lookup", [ 
                    list:vlist, 
                    onselect:{o->
                        actionParam.value = o.name;
                        actionParam.usevar = true;
                        binding.refresh();
                    }
                ] );
            }
            
        }
        
        ]]>
        
    </code>
    
    <pages>
        <page template="com.rameses.rules.actions.ui.ValueHandler"/>
    </pages>
    
</workunit>