<workunit>
    <invokers>
        <invoker type="conditionvaluehandler:dynamic" action="init"/>
    </invokers>
    <code>
         <![CDATA[    

        import com.rameses.rcp.annotations.*
        import com.rameses.rcp.common.*
        import com.rameses.osiris2.client.*
        import com.rameses.osiris2.common.*
        import com.rameses.rules.helpers.*;
        
        class DynamicConditionValueHandler {
        
            @Binding
            def binding;
        
            def constraint;
            def fieldDef;
            def handler;
            
            void init() {
                handler = fieldDef.handler;
            }
            
            def viewValueOpener() {
                def params = [:];
                params.onselect = { val->
                    constraint.valueText = val.name;
                    constraint.value = val;
                    binding.refresh();
                } ; 
                return InvokerUtil.lookupOpener( handler, params );
            }
        }
        
        ]]>
        
    </code>
    
    <pages>
        <page name="default" template="com.rameses.rules.constraints.ui.ObjectHandler"/>
    </pages>
    
</workunit>