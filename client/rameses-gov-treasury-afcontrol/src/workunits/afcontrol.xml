<workunit>
    <invokers>
        <invoker type="afcontrol:open" caption="AF Control" action="open"/>
        
        
        <invoker type="formActions" caption="Issued" action="viewIssued"/>
        <invoker type="formActions" caption="Assignees" action="viewAssignees"/>
        
        
        <invoker type="formActions" caption="Lookup Bank" action="lookupBank"/>
    </invokers>
    
    <code>
        <![CDATA[    

        import com.rameses.rcp.annotations.*
        import com.rameses.rcp.common.*
        import com.rameses.osiris2.client.*
        import com.rameses.osiris2.common.*
        
        class  AFController  {
            
            @Service("AFControlService")
            def afControlSvc;
        
            def entity;
            def title = "AF Control";
            
            void open() {
                entity = afControlSvc.open(entity);
            }
            
            def cancelledListModel = [
                fetchList: { o->
                    return entity.cancelledItems;
                }
            ] as BasicListModel;
            
            def viewIssued() {
                MsgBox.alert("issued");
            }

            def viewAssignees() {
                MsgBox.alert("assignees");
            }
            
            def lookupBank() {
                return InvokerUtil.lookupOpener("bank:lookup");
            }
            
        }
        
        
        ]]>
        
    </code>
    
    <pages>
        <page template="com.rameses.gov.treasury.afcontrol.AFControl"/>
    </pages>
    
</workunit>