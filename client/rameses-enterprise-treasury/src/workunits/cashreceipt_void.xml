<workunit>
    
   <invokers>
         <invoker type="cashreceiptinfo:formActions" caption="Void" action="open" target="popup"/>
         
         <invoker type="formActions" caption="Post" action="save"  />
   </invokers>
   
   <code>
       <![CDATA[
        import com.rameses.osiris2.common.*;
        import com.rameses.rcp.common.*;
        import com.rameses.rcp.annotations.*;
        import com.rameses.osiris2.client.*;
        import com.rameses.util.*;
        
        class CashReceiptVoidController {
        
            @Caller
            def caller;
        
            @Service("CashReceiptVoidService")
            def service;

            boolean allowCreate = false;
            boolean allowEdit = false;
            
            def entity;
            
            void open() {
                def receipt = caller.entity;
                entity = [objid: "CRVOID"+ new java.rmi.server.UID() ];
                entity.receipt = receipt;
            }
            
            def doOk() {
                if( MsgBox.confirm( "You are about to void this receipt. Please ensure you have the original receipt on hand. Continue?")) {
                    service.post( entity );
                    return "_close";
                }
            }
            
            def doCancel() {
                return "_close";
            }
            
        }      
       ]]>
   </code>
   
   <pages>
        <page template="com.rameses.enterprise.treasury.cashreceipt.CashReceiptVoidPage"/>
   </pages>
   
</workunit>