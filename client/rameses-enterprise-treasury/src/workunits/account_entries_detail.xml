<workunit>
    
   <invokers>
         <invoker type="account:detail" />
   </invokers>
   
   <code>
       <![CDATA[
        import com.rameses.osiris2.common.*;
        import com.rameses.rcp.common.*;
        import com.rameses.rcp.annotations.*;
        import com.rameses.osiris2.client.*;
        
        class AccountEntriesController  {
        
            def entity;
            def service;
            def page = 1;
            
            def title;
            
            void init() {
                page = entity.currentpageno;
                title = entity.title;
                println "title is " + title ;
            }
            
            void reload( e ) {
                entity = e;
                init();
            }
            
            def listModel = [
                fetchList: { o->
                    if(!page) page = entity.currentpageno;
                    return service.getEntries( [objid: entity.objid, page: page ] );
                }
            
            ] as BasicListModel;
            
            void nextPage() {
                page+=1; 
                if(page>entity.currentpageno) {
                    page = entity.currentpageno;
                    throw new Exception("End of page");
                }
                listModel.reload();
            }
            
            void prevPage() {
                page-=1;
                if(page<1) {
                    page = 1;
                    throw new Exception("Beginning of page");
                }
                listModel.reload();
           }
        }      
       ]]>
   </code>
   
   <pages>
       <page template="com.rameses.enterprise.treasury.shared.AccountEntriesPage" />
   </pages>
   
</workunit>