import com.rameses.annotations.*;
import com.rameses.util.*;
import java.rmi.server.*;
import com.rameses.common.*
import com.rameses.services.extended.*;

class FundService extends ActiveCrudNodeService {

	@ActiveDB("fund")
	def em;
	
	public void afterNode( def selectedNode, def list ) {
		list.each { 
			it.caption = it.code + " (" + it.title + ") ";
			it.filetype = "fund";
			it.children = [  
				[caption:'Subfund', filetype: 'subfund']
			]
		}
	}

	@ProxyMethod
	public def getColumns( def o ) {
		return[
			[name:'icon', caption:'', type:'icon', width:30, resizable:false ],
			[name:'code', caption:'Acct Code' ],
			[name:'title', caption:'Acct Title' ],
			[name:'type', caption:'Type' ],
			[name:'_filetype', caption:'Filetype' ],
		];
	}
	
	public void beforeList(o) {
		if(o._tag == "lookup") {
			o._listMethod = "getLookup"
		}
	}

	public void afterList(o,list) {
		list.each{
			it._filetype = it.type;
		}
	}

}
