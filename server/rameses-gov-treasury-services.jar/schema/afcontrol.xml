<schema>

	<!--
	startseries,endseries=series assigned when afcontrol was created	
	currentseries=updated during cancellation if number was affected, during issuance of receipt
	beginseries=series the collector was using. first time when created, updated during transfer
	lastremittedseries=updated everytime a remittance is done.
	-->
	<element name="afcontrol" tablename="afcontrol">
		<field name="objid" primary="true"/>	
		<field name="state" />
		<field name="mode"/>
		<field name="af" required="true"/>
		<field name="assignee" required="true"/>
		<field name="collector" required="true"/>
		<field name="startseries" type="integer"/>
		<field name="endseries" type="integer"/>
		<field name="lastremittedseries" type="integer"/>
		<field name="currentseries" type="integer"/>
		<field name="beginseries" type="integer"/>
		<field name="prefix" />
		<field name="suffix" />
		<field name="stub" type="integer"/>
		<field name="active" type="integer"/>
		<field name="refid" />
	</element>

	<element name="cancelled" tablename="afcontrolcancelled">
		<field name="objid" primary="true"/>	
		<field name="controlid" />
		<field name="startseries" type="integer" />
		<field name="endseries"  type="integer"/>
		<field name="reason" />
		<field name="collector" />
		<field name="txndate" type="timestamp"/>
		<field name="qty"  type="integer"/>
		<field name="issuedby" />
	</element>
	
	<element name="transferhistory" tablename="afcontroltransferhistory">
		<field name="objid" primary="true"/>	
		<field name="controlid" />
		<field name="txndate" type="timestamp"/>
		<field name="startseries" type="integer" />
		<field name="endseries"  type="integer"/>
		<field name="collector" />
		<field name="assignee" />
	</element>
	
	<element name="beginbalance" tablename="afcontrolbeginbalance">
		<field name="objid" primary="true"/>	
		<field name="af" />
		<field name="txndate" type="timestamp"/>
		<field name="startseries" type="integer" />
		<field name="endseries"  type="integer"/>
		<field name="collector" />
		<field name="qty" type="integer"/>
		<field name="startstub" type="integer"/>
		<field name="prefix" />
		<field name="suffix" />
		<field name="createdby" />
	</element>
	
</schema>